<template>
    <GuestLayout>
        <Head title="Politique de Confidentialit√©" />

        <div class="max-w-4xl mx-auto px-4 py-8">
            <!-- Header -->
            <div class="mb-8">
                <h1 class="text-4xl font-bold text-gray-900 dark:text-white mb-4">
                    Politique de Confidentialit√©
                </h1>
                <p v-if="policy" class="text-sm text-gray-600 dark:text-gray-400">
                    Version {{ policy.version }} ‚Ä¢ En vigueur depuis le {{ policy.effective_at }}
                </p>
                <p class="mt-2 text-gray-700 dark:text-gray-300">
                    Conforme au R√®glement G√©n√©ral sur la Protection des Donn√©es (RGPD) - 
                    <a href="https://www.cnil.fr/fr/reglement-europeen-protection-donnees" 
                       target="_blank" 
                       class="text-indigo-600 hover:text-indigo-800 underline">
                        R√®glement (UE) 2016/679
                    </a>
                </p>
            </div>

            <!-- Contenu -->
            <div class="prose prose-lg dark:prose-invert max-w-none">
                <!-- Section 1 : Responsable du traitement -->
                <section class="mb-8">
                    <h2 class="text-2xl font-semibold text-gray-900 dark:text-white mb-4">
                        1. Responsable du traitement des donn√©es
                    </h2>
                    <p class="text-gray-700 dark:text-gray-300">
                        <strong>D√©mocratos</strong><br>
                        Plateforme citoyenne de d√©mocratie participative<br>
                        Email : <a href="mailto:contact@demoscratos.fr" class="text-indigo-600 hover:text-indigo-800">contact@demoscratos.fr</a><br>
                        DPO (D√©l√©gu√© √† la Protection des Donn√©es) : <a href="mailto:dpo@demoscratos.fr" class="text-indigo-600 hover:text-indigo-800">dpo@demoscratos.fr</a>
                    </p>
                </section>

                <!-- Section 2 : Donn√©es collect√©es -->
                <section class="mb-8">
                    <h2 class="text-2xl font-semibold text-gray-900 dark:text-white mb-4">
                        2. Donn√©es personnelles collect√©es
                    </h2>
                    <div class="space-y-4 text-gray-700 dark:text-gray-300">
                        <h3 class="text-xl font-semibold text-gray-900 dark:text-white">Donn√©es d'identification (FranceConnect+)</h3>
                        <ul class="list-disc pl-6 space-y-2">
                            <li><strong>Identifiant unique FranceConnect+</strong> (sub) : Stock√© de mani√®re s√©curis√©e</li>
                            <li><strong>Email</strong> : Pour la communication et la r√©cup√©ration de compte</li>
                            <li><strong>Nom et pr√©nom</strong> : Chiffr√©s et non expos√©s publiquement (anonymat par d√©faut)</li>
                            <li><strong>Date de naissance, sexe, lieu de naissance</strong> : Chiffr√©s, utilis√©s uniquement pour v√©rification d'identit√©</li>
                        </ul>

                        <h3 class="text-xl font-semibold text-gray-900 dark:text-white mt-6">Donn√©es de profil</h3>
                        <ul class="list-disc pl-6 space-y-2">
                            <li><strong>Pseudonyme al√©atoire</strong> (ex: Citoyen1234) : Affich√© publiquement pour garantir l'anonymat</li>
                            <li><strong>Scope territorial</strong> : National, r√©gional ou d√©partemental</li>
                            <li><strong>V√©rification FranceConnect+</strong> : Badge de v√©rification d'identit√©</li>
                        </ul>

                        <h3 class="text-xl font-semibold text-gray-900 dark:text-white mt-6">Donn√©es d'activit√©</h3>
                        <ul class="list-disc pl-6 space-y-2">
                            <li>Posts, commentaires, votes sur sujets de d√©bat</li>
                            <li>Participations aux scrutins citoyens (anonymis√©es via jetons cryptographiques)</li>
                            <li>Statistiques de gamification (XP, niveaux, badges)</li>
                        </ul>
                    </div>
                </section>

                <!-- Section 3 : Finalit√©s -->
                <section class="mb-8">
                    <h2 class="text-2xl font-semibold text-gray-900 dark:text-white mb-4">
                        3. Finalit√©s du traitement (RGPD Art. 5)
                    </h2>
                    <ul class="list-disc pl-6 space-y-2 text-gray-700 dark:text-gray-300">
                        <li><strong>Authentification s√©curis√©e</strong> via FranceConnect+</li>
                        <li><strong>Participation d√©mocratique</strong> : D√©bats, votes, propositions citoyennes</li>
                        <li><strong>Pr√©vention de la fraude</strong> : Hash cryptographique pour √©viter doublons</li>
                        <li><strong>Statistiques anonymes</strong> : Analyse d'engagement sans donn√©es personnelles</li>
                        <li><strong>Communication</strong> : Notifications li√©es √† vos activit√©s (d√©sactivables)</li>
                    </ul>
                </section>

                <!-- Section 4 : Base l√©gale -->
                <section class="mb-8">
                    <h2 class="text-2xl font-semibold text-gray-900 dark:text-white mb-4">
                        4. Base l√©gale du traitement (RGPD Art. 6)
                    </h2>
                    <ul class="list-disc pl-6 space-y-2 text-gray-700 dark:text-gray-300">
                        <li><strong>Consentement</strong> (Art. 6.1.a) : Acceptation lors de la connexion FranceConnect+</li>
                        <li><strong>Ex√©cution du contrat</strong> (Art. 6.1.b) : Fourniture des services de la plateforme</li>
                        <li><strong>Int√©r√™t l√©gitime</strong> (Art. 6.1.f) : Lutte contre la fraude et s√©curit√©</li>
                    </ul>
                </section>

                <!-- Section 5 : Anonymat et transparence -->
                <section class="mb-8 bg-blue-50 dark:bg-blue-900/20 p-6 rounded-lg border border-blue-200 dark:border-blue-800">
                    <h2 class="text-2xl font-semibold text-blue-900 dark:text-blue-100 mb-4">
                        üîí 5. Anonymat des citoyens (Principe cl√©)
                    </h2>
                    <div class="space-y-4 text-blue-800 dark:text-blue-200">
                        <p>
                            <strong>Par d√©faut, votre identit√© reste anonyme</strong> sur la plateforme :
                        </p>
                        <ul class="list-disc pl-6 space-y-2">
                            <li>Votre <strong>pseudonyme al√©atoire</strong> (ex: Citoyen1234) est affich√© publiquement</li>
                            <li>Votre <strong>nom r√©el est chiffr√©</strong> et n'appara√Æt jamais dans les √©changes publics</li>
                            <li>Seul votre <strong>ID utilisateur unique</strong> est utilis√© en interne</li>
                        </ul>
                        <p class="mt-4">
                            <strong>Exceptions (comptes publics transparents) :</strong>
                        </p>
                        <ul class="list-disc pl-6 space-y-2">
                            <li>Journalistes v√©rifi√©s</li>
                            <li>√âlus et l√©gislateurs</li>
                            <li>Repr√©sentants d'organisations</li>
                            <li>Personnalit√©s publiques (opt-in volontaire)</li>
                        </ul>
                    </div>
                </section>

                <!-- Section 6 : S√©curit√© -->
                <section class="mb-8">
                    <h2 class="text-2xl font-semibold text-gray-900 dark:text-white mb-4">
                        6. S√©curit√© des donn√©es (RGPD Art. 32)
                    </h2>
                    <ul class="list-disc pl-6 space-y-2 text-gray-700 dark:text-gray-300">
                        <li><strong>Chiffrement</strong> : AES-256 pour toutes les donn√©es sensibles</li>
                        <li><strong>Hash cryptographique</strong> : SHA-256 + PEPPER pour r√©f√©rences citoyennes</li>
                        <li><strong>Connexion s√©curis√©e</strong> : HTTPS/TLS obligatoire</li>
                        <li><strong>Authentification forte</strong> : FranceConnect+ (niveau eIDAS substantiel)</li>
                        <li><strong>Surveillance</strong> : Logs d'acc√®s admin trac√©s et audit√©s</li>
                    </ul>
                </section>

                <!-- Section 7 : Vos droits -->
                <section class="mb-8">
                    <h2 class="text-2xl font-semibold text-gray-900 dark:text-white mb-4">
                        7. Vos droits (RGPD Art. 15-22)
                    </h2>
                    <div class="space-y-4 text-gray-700 dark:text-gray-300">
                        <ul class="list-disc pl-6 space-y-2">
                            <li><strong>Droit d'acc√®s</strong> (Art. 15) : Consulter vos donn√©es via "Mon Compte"</li>
                            <li><strong>Droit de rectification</strong> (Art. 16) : Modifier vos informations</li>
                            <li><strong>Droit √† l'effacement</strong> (Art. 17) : Supprimer votre compte (anonymisation compl√®te)</li>
                            <li><strong>Droit √† la portabilit√©</strong> (Art. 20) : Exporter vos donn√©es (format JSON)</li>
                            <li><strong>Droit d'opposition</strong> (Art. 21) : Refuser certains traitements</li>
                            <li><strong>Droit de retrait du consentement</strong> (Art. 7.3) : √Ä tout moment</li>
                        </ul>
                        <p class="mt-4 font-semibold">
                            Pour exercer vos droits : 
                            <a href="mailto:dpo@demoscratos.fr" class="text-indigo-600 hover:text-indigo-800 underline">
                                dpo@demoscratos.fr
                            </a>
                        </p>
                        <p class="text-sm">
                            D√©lai de r√©ponse : 30 jours maximum (RGPD Art. 12.3)
                        </p>
                    </div>
                </section>

                <!-- Section 8 : Conservation -->
                <section class="mb-8">
                    <h2 class="text-2xl font-semibold text-gray-900 dark:text-white mb-4">
                        8. Dur√©e de conservation
                    </h2>
                    <ul class="list-disc pl-6 space-y-2 text-gray-700 dark:text-gray-300">
                        <li><strong>Compte actif</strong> : Tant que le compte existe</li>
                        <li><strong>Apr√®s suppression</strong> : Anonymisation imm√©diate + conservation logs 1 an (obligation l√©gale)</li>
                        <li><strong>Donn√©es d'audit</strong> : 3 ans (pr√©vention fraude)</li>
                    </ul>
                </section>

                <!-- Section 9 : Contact CNIL -->
                <section class="mb-8">
                    <h2 class="text-2xl font-semibold text-gray-900 dark:text-white mb-4">
                        9. R√©clamation aupr√®s de la CNIL
                    </h2>
                    <p class="text-gray-700 dark:text-gray-300">
                        Si vous estimez que vos droits ne sont pas respect√©s, vous pouvez introduire une r√©clamation aupr√®s de la 
                        <a href="https://www.cnil.fr/fr/plaintes" target="_blank" class="text-indigo-600 hover:text-indigo-800 underline">
                            Commission Nationale de l'Informatique et des Libert√©s (CNIL)
                        </a>.
                    </p>
                </section>

                <!-- Section 10 : Modifications -->
                <section class="mb-8">
                    <h2 class="text-2xl font-semibold text-gray-900 dark:text-white mb-4">
                        10. Modifications de la politique
                    </h2>
                    <p class="text-gray-700 dark:text-gray-300">
                        Nous nous r√©servons le droit de modifier cette politique. Vous serez inform√© par email de tout changement majeur.
                        La version en vigueur est toujours disponible sur cette page.
                    </p>
                </section>
            </div>

            <!-- Footer CTA -->
            <div class="mt-12 pt-8 border-t border-gray-200 dark:border-gray-700">
                <div class="flex flex-col sm:flex-row gap-4 justify-between items-center">
                    <Link :href="route('home')" 
                          class="text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-300">
                        ‚Üê Retour √† l'accueil
                    </Link>
                    <div class="flex gap-4">
                        <Link :href="route('terms')" 
                              class="text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100 underline">
                            Conditions d'utilisation
                        </Link>
                        <Link :href="route('cookies')" 
                              class="text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100 underline">
                            Politique des cookies
                        </Link>
                    </div>
                </div>
            </div>
        </div>
    </GuestLayout>
</template>

<script setup>
import GuestLayout from '@/Layouts/GuestLayout.vue';
import { Head, Link } from '@inertiajs/vue3';

defineProps({
    policy: {
        type: Object,
        default: null,
    },
});
</script>

